
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" 
"http://www.w3.org/TR/REC-html40/strict.dtd">
<html>

    <head>

        <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
        <META NAME=KEYWORDS CONTENT="C++ SDL 2 Tutorial 2D Windows Linux Mac calculating frame rate">
        <META NAME=DESCRIPTION CONTENT="Calculate the frame rate for your SDL 2 applications">

        <title>Lazy Foo' Productions - Calculating Frame Rate</title>

        <link REL="stylesheet" TYPE="text/css" href="../../../layout/lazy.css">

    </head>

    <body>

        <div class="header">

<h1 style="margin-bottom:0px;padding-bottom:0px;border-bottom:0px;">Lazy Foo' Productions</h1>
<div class="nav">
<a class="nav" href="http://forums.libsdl.org/">SDL Forums</a>
<a class="nav" href="../index.php.html">SDL Tutorials</a>
<a class="nav" href="../../../articles/index.php.html">Articles</a>
<a class="nav" href="../../OpenGL/index.php.html">OpenGL Tutorials</a>
<a class="nav" href="http://www.opengl.org/discussion_boards/forum.php">OpenGL Forums</a>
<div class="ads">
<script type="text/javascript"><!--
google_ad_client = "pub-5880704953225255";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "text_image";
google_ad_channel ="";
google_color_border = "6699CC";
google_color_bg = "003366";
google_color_link = "FFFFFF";
google_color_url = "AECCEB";
google_color_text = "AECCEB";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><a class="nav" href="../../../index.php.html">News</a>
<a class="nav" href="../../../faq.php.html">FAQs</a>
<!--<a class="nav" href="http://lazyfoo.net/games/index.php">Games</a>-->
<a class="nav" href="../../../contact.php.html">Contact</a>
<a class="nav" href="../../../donate.php.html">Donations</a>

</div><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32350292-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!--Init facebook-->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!--Init twitter-->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<!--Init google+-->
<script src="https://apis.google.com/js/plusone.js"></script>
</div>        
        <div class="content">

            <div class="tutPreface"><h1 class="tutHead">Calculating Frame Rate</h1>
            <div class="tutImg"><img src="preview.png"></div>
            <h6>Last Updated 3/16/14</h6>
            Now that we know <a class="tutLink" href="../23_advanced_timers/index.php.html">how to make a timer with SDL</a> it's time to put it to use. We're going to use the timer to
            measure fps.
            </div>
            

<div class="tutCode">            //Main loop flag
            bool quit = false;

            //Event handler
            SDL_Event e;

            //Set text color as black
            SDL_Color textColor = { 0, 0, 0, 255 };

            //The frames per second timer
            LTimer fpsTimer;

            //In memory text stream
            std::stringstream timeText;

            //Start counting frames per second
            int countedFrames = 0;
            fpsTimer.start();
</div>

<div class="tutText">
In order to calculate the frames per second, we need to keep track of the number of frames rendered and the number of second passed. Before we enter the main loop, we start a timer
used to calculate fps and declare a variable to keep track of the number of frames rendered.
</div>


<div class="tutCode">                //Calculate and correct fps
                float avgFPS = countedFrames / ( fpsTimer.getTicks() / 1000.f );
                if( avgFPS > 2000000 )
                {
                    avgFPS = 0;
                }
</div>

<div class="tutText">
To calculate frames per second, you just take the number of rendered frames and divide it by the seconds passed. Now it is possible for there to be a very small amount of time
passed for the first frame and have it give us a really high fps. This is why we correct the value if it is really high.
</div>


<div class="tutCode">                //Set text to be rendered
                timeText.str( "" );
                timeText << "Average Frames Per Second " << avgFPS; 

                //Render text
                if( !gFPSTextTexture.loadFromRenderedText( timeText.str().c_str(), textColor ) )
                {
                    printf( "Unable to render FPS texture!\n" );
                }

                //Clear screen
                SDL_SetRenderDrawColor( gRenderer, 0xFF, 0xFF, 0xFF, 0xFF );
                SDL_RenderClear( gRenderer );

                //Render textures
                gFPSTextTexture.render( ( SCREEN_WIDTH - gFPSTextTexture.getWidth() ) / 2, ( SCREEN_HEIGHT - gFPSTextTexture.getHeight() ) / 2 );

                //Update screen
                SDL_RenderPresent( gRenderer );
                ++countedFrames;
</div>

<div class="tutText">
After calculating the fps, we render the value as a texture to the screen. After we're done rendering the scene, we increment the frame counter.<br/>
<br/>
Since this program is vsynced, it is probably going to report 60 fps. If you want to find out how much you hardware can do, just create a renderer without vsync.
</div>


            <div class="tutFooter">
            Download the media and source code for this tutorial <a class="tutLink" href="24_calculating_frame_rate.zip">here</a>.<br/>
            <br/>
            <a class="leftNav" href="../index.php.html#Calculating Frame Rate">Back to SDL Tutorials</a><br>
            </div>

        </div>

        <div class="footer">

<div style="text-align: center;">
<!--Facebook-->
<span style="line-height: 10px;" class="fb-share-button" data-href="http://lazyfoo.net/" data-type="button_count"></span>

<!--Google+-->
<g:plus action="share" annotation="bubble" height=20 href="http://lazyfoo.net/"></g:plus>

<!--Twitter-->
<a style="line-height: 0px;" href="https://twitter.com/share" class="twitter-share-button" data-lang="en">Tweet</a>

</div>
<div class="nav">
<a class="nav" href="http://forums.libsdl.org/">SDL Forums</a>
<a class="nav" href="../index.php.html">SDL Tutorials</a>
<a class="nav" href="../../../articles/index.php.html">Articles</a>
<a class="nav" href="../../OpenGL/index.php.html">OpenGL Tutorials</a>
<a class="nav" href="http://www.opengl.org/discussion_boards/forum.php">OpenGL Forums</a>
<div class="ads">
<script type="text/javascript"><!--
google_ad_client = "pub-5880704953225255";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "text_image";
google_ad_channel ="";
google_color_border = "6699CC";
google_color_bg = "003366";
google_color_link = "FFFFFF";
google_color_url = "AECCEB";
google_color_text = "AECCEB";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><a class="nav" href="../../../index.php.html">News</a>
<a class="nav" href="../../../faq.php.html">FAQs</a>
<!--<a class="nav" href="http://lazyfoo.net/games/index.php">Games</a>-->
<a class="nav" href="../../../contact.php.html">Contact</a>
<a class="nav" href="../../../donate.php.html">Donations</a>

</div>
<h6>
Copyright Lazy Foo' Productions 2004-2018
</h6>

</div>
    </body>
</html>
